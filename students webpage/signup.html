<!doctype html>
<html lang="en">
    <head>
        <title>SignUp</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div class="bodyDiv">
            <h3 class="display-3 heading">Create An Account</h3>
            <form id = "signupForm" action="homepage.html" class="was-validated" onsubmit="signup(); return false">
                <div class="form-check mb-3">
                    <label class="form-label" for="usernameInput">username</label>
                    <div class="input-group has-validation">
                        <span class="input-group-text" >@</span>
                        <input id="usernameInput" type="text" class="form-control" required>
                    </div>
                </div>
                <div class="form-check mb-3">
                    <label class="form-label" for="passwordInput">password</label>
                    <div class="input-group has-validation">
                        <span class="input-group-text" >#</span>
                        <input id="passwordInput" type="password" class="form-control" required>
                    </div>
                </div>
                <div  class="centeredText">
                    <span id="messeger" class="text-danger"></span>
                </div>
                <br>
                <div class="centeredText">
                    <button class="btn btn-primary" type="submit">login</button>      
                </div>
                <br>
                
                <div class="centeredText">
                    <span>have an account? <a href="login.html">login!</a></span>
                </div>
            </form>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <script src="index.js"  type="text/javascript"></script>
        <script>
            const signup = async()=>{
                const data = {
                    username:document.getElementById('usernameInput').value,
                    password:document.getElementById('passwordInput').value

                }
                let user = await postUser(data.username,data.password)
                if (user){
                    sessionStorage.setItem('username',data.username)
                    redirectHome()
                }else{
                    document.getElementById("messeger").innerText = 'Name Taken'
                }
                
            }
        </script>
    </body>
</html>